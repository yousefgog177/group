<html>
  <head>
    <meta charset="utf-8" />
    <title>Welcome!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="/style.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  </head>
  <body>
    <br><br>
    <div class="head-div field">
      <input id="a7a" type="textarea" class="input-form" placeholder="" name="Username"/>
      <label for="name" class="label-form">username your account</label>
      </div>
      <br><br>
    <br><br>
    <div class="head-div field">
      <input id="a7" type="textarea" class="input-form" placeholder="" name="Email"/>
      <label for="name" class="label-form">Email Account</label>
      </div>
      <br><br>
          <div class="head-div field">
      <input id="a" type="textarea" class="input-form" placeholder="" name="Password"/>
      <label for="name" class="label-form">Password Account</label>
      </div>
    <div class="head-div field">
      <br>
      <button class="wtf" id="test" onclick="myFunc1()">
        Next
    </button>

      <br><br>
      <h1 id="answer">
        
        </h1>
            <h1 id="question">
        
        </h1>
      <h1 id="error">
        
        </h1>
      <h1 id="x">
        
        </h1>
      <h1 id="tmam">
        
        </h1>
    </div>

  </body>
    <script src="https://hcaptcha.com/1/api.js" async defer></script>
<div
  class="h-captcha"
  id="hcaptcha"
  data-sitekey="e46bdb57-621f-4386-b8fc-23a2e92189f7"
  data-theme="dark"
  data-error-callback="onError"
></div>
    <script>
let code;
if(localStorage.getItem('token')){
var error = ``
fetch(('/api/data/@me') , {method: 'GET', headers: {'authorization': localStorage.getItem('token'),'Content-Type': 'application/json' }, referrerPolicy: "no-referrer"}).catch(err =>{
able = false
error = err
}).then(async res =>{
if(!able) return swal("Error", "Internet connection failed\n" + error, "error")
  let json = await res.json();
if(json.username) window.location = "/chat"
})
}
setInterval(() => {
code = hcaptcha.getResponse()
if(!hcaptcha.getResponse()) code = null
}, 2000)
   function myFunc1() {
if(!code) return swal('Captcha', 'Boop Boob Boop Boob', 'error')

      var myInput = document.getElementById("a7a").value;
      var myInputs = document.getElementById("a7").value;
      var myInpu = document.getElementById("a").value;

      var answer = document.getElementById("answer");

if(!myInput) return answer.innerHTML = "Enter Your Code or password!"
fetch(('https://apigroup.glitch.me/api/register-account/') , {method: 'post', body: JSON.stringify({"captcha": code, "name": myInput, "email": myInputs, "password": myInpu}), headers: { 'Content-Type': 'application/json' }, referrerPolicy: "no-referrer"}).then(async one =>{

  let ones = await one.json();
  answer.innerHTML = ones.message

})
    }
  

function myFunc2() {
  var pass = document.getElementById("a7");
  if (pass.type === "password") {
    pass.type = "text";
  } else {
    pass.type = "password";
  }
}
/*
const togglePassword = document.querySelector('#test3');
const password = document.querySelector('#a7');

togglePassword.addEventListener('click', function (e) {

    const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
    password.setAttribute('type', type);

    this.classList.toggle('fa-eye-slash');
});*/

  </script>
</html>
